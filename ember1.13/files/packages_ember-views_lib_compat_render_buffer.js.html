<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>packages/ember-views/lib/compat/render_buffer.js - The Ember API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="The Ember API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.13.11</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Backburner.html">Backburner</a></li>
                                <li><a href="../classes/Descriptor.html">Descriptor</a></li>
                                <li><a href="../classes/EachProxy.html">EachProxy</a></li>
                                <li><a href="../classes/Ember.html">Ember</a></li>
                                <li><a href="../classes/Ember._Metamorph.html">Ember._Metamorph</a></li>
                                <li><a href="../classes/Ember._MetamorphView.html">Ember._MetamorphView</a></li>
                                <li><a href="../classes/Ember.ActionHandler.html">Ember.ActionHandler</a></li>
                                <li><a href="../classes/Ember.Application.html">Ember.Application</a></li>
                                <li><a href="../classes/Ember.AriaRoleSupport.html">Ember.AriaRoleSupport</a></li>
                                <li><a href="../classes/Ember.Array.html">Ember.Array</a></li>
                                <li><a href="../classes/Ember.ArrayController.html">Ember.ArrayController</a></li>
                                <li><a href="../classes/Ember.ArrayProxy.html">Ember.ArrayProxy</a></li>
                                <li><a href="../classes/Ember.AutoLocation.html">Ember.AutoLocation</a></li>
                                <li><a href="../classes/Ember.Binding.html">Ember.Binding</a></li>
                                <li><a href="../classes/Ember.Checkbox.html">Ember.Checkbox</a></li>
                                <li><a href="../classes/Ember.ClassNamesSupport.html">Ember.ClassNamesSupport</a></li>
                                <li><a href="../classes/Ember.CollectionView.html">Ember.CollectionView</a></li>
                                <li><a href="../classes/Ember.Comparable.html">Ember.Comparable</a></li>
                                <li><a href="../classes/Ember.Component.html">Ember.Component</a></li>
                                <li><a href="../classes/Ember.computed.html">Ember.computed</a></li>
                                <li><a href="../classes/Ember.ComputedProperty.html">Ember.ComputedProperty</a></li>
                                <li><a href="../classes/Ember.ContainerDebugAdapter.html">Ember.ContainerDebugAdapter</a></li>
                                <li><a href="../classes/Ember.ContainerView.html">Ember.ContainerView</a></li>
                                <li><a href="../classes/Ember.Controller.html">Ember.Controller</a></li>
                                <li><a href="../classes/Ember.ControllerMixin.html">Ember.ControllerMixin</a></li>
                                <li><a href="../classes/Ember.Copyable.html">Ember.Copyable</a></li>
                                <li><a href="../classes/Ember.CoreObject.html">Ember.CoreObject</a></li>
                                <li><a href="../classes/Ember.CoreView.html">Ember.CoreView</a></li>
                                <li><a href="../classes/Ember.DataAdapter.html">Ember.DataAdapter</a></li>
                                <li><a href="../classes/Ember.DefaultResolver.html">Ember.DefaultResolver</a></li>
                                <li><a href="../classes/Ember.Deferred.html">Ember.Deferred</a></li>
                                <li><a href="../classes/Ember.EmptyViewSupport.html">Ember.EmptyViewSupport</a></li>
                                <li><a href="../classes/Ember.Enumerable.html">Ember.Enumerable</a></li>
                                <li><a href="../classes/Ember.EnumerableUtils.html">Ember.EnumerableUtils</a></li>
                                <li><a href="../classes/Ember.Error.html">Ember.Error</a></li>
                                <li><a href="../classes/Ember.EventDispatcher.html">Ember.EventDispatcher</a></li>
                                <li><a href="../classes/Ember.Evented.html">Ember.Evented</a></li>
                                <li><a href="../classes/Ember.FEATURES.html">Ember.FEATURES</a></li>
                                <li><a href="../classes/Ember.Freezable.html">Ember.Freezable</a></li>
                                <li><a href="../classes/Ember.Handlebars.html">Ember.Handlebars</a></li>
                                <li><a href="../classes/Ember.Handlebars.helpers.html">Ember.Handlebars.helpers</a></li>
                                <li><a href="../classes/Ember.HashLocation.html">Ember.HashLocation</a></li>
                                <li><a href="../classes/Ember.Helper.html">Ember.Helper</a></li>
                                <li><a href="../classes/Ember.HistoryLocation.html">Ember.HistoryLocation</a></li>
                                <li><a href="../classes/Ember.HTMLBars.html">Ember.HTMLBars</a></li>
                                <li><a href="../classes/Ember.inject.html">Ember.inject</a></li>
                                <li><a href="../classes/Ember.InjectedProperty.html">Ember.InjectedProperty</a></li>
                                <li><a href="../classes/Ember.Instrumentation.html">Ember.Instrumentation</a></li>
                                <li><a href="../classes/Ember.InstrumentationSupport.html">Ember.InstrumentationSupport</a></li>
                                <li><a href="../classes/Ember.LegacyViewSupport.html">Ember.LegacyViewSupport</a></li>
                                <li><a href="../classes/Ember.LinkComponent.html">Ember.LinkComponent</a></li>
                                <li><a href="../classes/Ember.Location.html">Ember.Location</a></li>
                                <li><a href="../classes/Ember.Logger.html">Ember.Logger</a></li>
                                <li><a href="../classes/Ember.Map.html">Ember.Map</a></li>
                                <li><a href="../classes/Ember.MapWithDefault.html">Ember.MapWithDefault</a></li>
                                <li><a href="../classes/Ember.Mixin.html">Ember.Mixin</a></li>
                                <li><a href="../classes/Ember.MutableArray.html">Ember.MutableArray</a></li>
                                <li><a href="../classes/Ember.MutableEnumerable.html">Ember.MutableEnumerable</a></li>
                                <li><a href="../classes/Ember.Namespace.html">Ember.Namespace</a></li>
                                <li><a href="../classes/Ember.NativeArray.html">Ember.NativeArray</a></li>
                                <li><a href="../classes/Ember.NoneLocation.html">Ember.NoneLocation</a></li>
                                <li><a href="../classes/Ember.Object.html">Ember.Object</a></li>
                                <li><a href="../classes/Ember.ObjectController.html">Ember.ObjectController</a></li>
                                <li><a href="../classes/Ember.ObjectProxy.html">Ember.ObjectProxy</a></li>
                                <li><a href="../classes/Ember.Observable.html">Ember.Observable</a></li>
                                <li><a href="../classes/Ember.OrderedSet.html">Ember.OrderedSet</a></li>
                                <li><a href="../classes/Ember.platform.html">Ember.platform</a></li>
                                <li><a href="../classes/Ember.PromiseProxyMixin.html">Ember.PromiseProxyMixin</a></li>
                                <li><a href="../classes/Ember.ProxyMixin.html">Ember.ProxyMixin</a></li>
                                <li><a href="../classes/Ember.ReduceComputedProperty.html">Ember.ReduceComputedProperty</a></li>
                                <li><a href="../classes/Ember.RenderBuffer.html">Ember.RenderBuffer</a></li>
                                <li><a href="../classes/Ember.Route.html">Ember.Route</a></li>
                                <li><a href="../classes/Ember.Router.html">Ember.Router</a></li>
                                <li><a href="../classes/Ember.run.html">Ember.run</a></li>
                                <li><a href="../classes/Ember.Select.html">Ember.Select</a></li>
                                <li><a href="../classes/Ember.Service.html">Ember.Service</a></li>
                                <li><a href="../classes/Ember.Set.html">Ember.Set</a></li>
                                <li><a href="../classes/Ember.SortableMixin.html">Ember.SortableMixin</a></li>
                                <li><a href="../classes/Ember.stream.Stream.html">Ember.stream.Stream</a></li>
                                <li><a href="../classes/Ember.streams.Dependency.html">Ember.streams.Dependency</a></li>
                                <li><a href="../classes/Ember.streams.Ember.stream.html">Ember.streams.Ember.stream</a></li>
                                <li><a href="../classes/Ember.streams.Subscriber.html">Ember.streams.Subscriber</a></li>
                                <li><a href="../classes/Ember.String.html">Ember.String</a></li>
                                <li><a href="../classes/Ember.SubArray.html">Ember.SubArray</a></li>
                                <li><a href="../classes/Ember.TargetActionSupport.html">Ember.TargetActionSupport</a></li>
                                <li><a href="../classes/Ember.TemplateRenderingSupport.html">Ember.TemplateRenderingSupport</a></li>
                                <li><a href="../classes/Ember.Templates.helpers.html">Ember.Templates.helpers</a></li>
                                <li><a href="../classes/Ember.Test.html">Ember.Test</a></li>
                                <li><a href="../classes/Ember.Test.Adapter.html">Ember.Test.Adapter</a></li>
                                <li><a href="../classes/Ember.Test.QUnitAdapter.html">Ember.Test.QUnitAdapter</a></li>
                                <li><a href="../classes/Ember.TextArea.html">Ember.TextArea</a></li>
                                <li><a href="../classes/Ember.TextField.html">Ember.TextField</a></li>
                                <li><a href="../classes/Ember.TextSupport.html">Ember.TextSupport</a></li>
                                <li><a href="../classes/Ember.TrackedArray.html">Ember.TrackedArray</a></li>
                                <li><a href="../classes/Ember.View.html">Ember.View</a></li>
                                <li><a href="../classes/Ember.ViewTargetActionSupport.html">Ember.ViewTargetActionSupport</a></li>
                                <li><a href="../classes/Ember.VisibilitySupport.html">Ember.VisibilitySupport</a></li>
                                <li><a href="../classes/Function.html">Function</a></li>
                                <li><a href="../classes/HandlebarsCompatibleHelper.html">HandlebarsCompatibleHelper</a></li>
                                <li><a href="../classes/Libraries.html">Libraries</a></li>
                                <li><a href="../classes/RoutingService.html">RoutingService</a></li>
                                <li><a href="../classes/RSVP.html">RSVP</a></li>
                                <li><a href="../classes/RSVP.EventTarget.html">RSVP.EventTarget</a></li>
                                <li><a href="../classes/RSVP.Promise.html">RSVP.Promise</a></li>
                                <li><a href="../classes/String.html">String</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ember.html">ember</a></li>
                                <li><a href="../modules/ember-application.html">ember-application</a></li>
                                <li><a href="../modules/ember-debug.html">ember-debug</a></li>
                                <li><a href="../modules/ember-extension-support.html">ember-extension-support</a></li>
                                <li><a href="../modules/ember-htmlbars.html">ember-htmlbars</a></li>
                                <li><a href="../modules/ember-metal.html">ember-metal</a></li>
                                <li><a href="../modules/ember-routing.html">ember-routing</a></li>
                                <li><a href="../modules/ember-routing-htmlbars.html">ember-routing-htmlbars</a></li>
                                <li><a href="../modules/ember-routing-views.html">ember-routing-views</a></li>
                                <li><a href="../modules/ember-runtime.html">ember-runtime</a></li>
                                <li><a href="../modules/ember-templates.html">ember-templates</a></li>
                                <li><a href="../modules/ember-testing.html">ember-testing</a></li>
                                <li><a href="../modules/ember-views.html">ember-views</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: packages/ember-views/lib/compat/render_buffer.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
@module ember
@submodule ember-views
*/

import jQuery from &quot;ember-views/system/jquery&quot;;
import Ember from &quot;ember-metal/core&quot;;
import o_create from &#x27;ember-metal/platform/create&#x27;;
import { normalizeProperty } from &quot;dom-helper/prop&quot;;
import { canSetNameOnInputs } from &quot;ember-views/system/platform&quot;;

// The HTML spec allows for &quot;omitted start tags&quot;. These tags are optional
// when their intended child is the first thing in the parent tag. For
// example, this is a tbody start tag:
//
// &lt;table&gt;
//   &lt;tbody&gt;
//     &lt;tr&gt;
//
// The tbody may be omitted, and the browser will accept and render:
//
// &lt;table&gt;
//   &lt;tr&gt;
//
// However, the omitted start tag will still be added to the DOM. Here
// we test the string and context to see if the browser is about to
// perform this cleanup, but with a special allowance for disregarding
// &lt;script tags. This disregarding of &lt;script being the first child item
// may bend the official spec a bit, and is only needed for Handlebars
// templates.
//
// http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#optional-tags
// describes which tags are omittable. The spec for tbody and colgroup
// explains this behavior:
//
// http://www.whatwg.org/specs/web-apps/current-work/multipage/tables.html#the-tbody-element
// http://www.whatwg.org/specs/web-apps/current-work/multipage/tables.html#the-colgroup-element
//
var omittedStartTagChildren;
var omittedStartTagChildTest = /(?:&lt;script)*.*?&lt;([\w:]+)/i;

function detectOmittedStartTag(dom, string, contextualElement) {
  omittedStartTagChildren = omittedStartTagChildren || {
    tr: dom.createElement(&#x27;tbody&#x27;),
    col: dom.createElement(&#x27;colgroup&#x27;)
  };

  // Omitted start tags are only inside table tags.
  if (contextualElement.tagName === &#x27;TABLE&#x27;) {
    var omittedStartTagChildMatch = omittedStartTagChildTest.exec(string);
    if (omittedStartTagChildMatch) {
      // It is already asserted that the contextual element is a table
      // and not the proper start tag. Just look up the start tag.
      return omittedStartTagChildren[omittedStartTagChildMatch[1].toLowerCase()];
    }
  }
}

function ClassSet() {
  this.seen = o_create(null);
  this.list = [];
}

ClassSet.prototype = {
  add(string) {
    if (this.seen[string] === true) { return; }
    this.seen[string] = true;

    this.list.push(string);
  }
};

var BAD_TAG_NAME_TEST_REGEXP = /[^a-zA-Z0-9\-]/;
var BAD_TAG_NAME_REPLACE_REGEXP = /[^a-zA-Z0-9\-]/g;

function stripTagName(tagName) {
  if (!tagName) {
    return tagName;
  }

  if (!BAD_TAG_NAME_TEST_REGEXP.test(tagName)) {
    return tagName;
  }

  return tagName.replace(BAD_TAG_NAME_REPLACE_REGEXP, &#x27;&#x27;);
}

var BAD_CHARS_REGEXP = /&amp;(?!\w+;)|[&lt;&gt;&quot;&#x27;&#x60;]/g;
var POSSIBLE_CHARS_REGEXP = /[&amp;&lt;&gt;&quot;&#x27;&#x60;]/;

function escapeAttribute(value) {
  // Stolen shamelessly from Handlebars

  var escape = {
    &quot;&lt;&quot;: &quot;&amp;lt;&quot;,
    &quot;&gt;&quot;: &quot;&amp;gt;&quot;,
    &#x27;&quot;&#x27;: &quot;&amp;quot;&quot;,
    &quot;&#x27;&quot;: &quot;&amp;#x27;&quot;,
    &quot;&#x60;&quot;: &quot;&amp;#x60;&quot;
  };

  var escapeChar = function(chr) {
    return escape[chr] || &quot;&amp;amp;&quot;;
  };

  var string = value.toString();

  if (!POSSIBLE_CHARS_REGEXP.test(string)) { return string; }
  return string.replace(BAD_CHARS_REGEXP, escapeChar);
}

export function renderComponentWithBuffer(component, contextualElement, dom) {
  var buffer = [];
  component.render(buffer);
  var element = dom.parseHTML(buffer.join(&#x27;&#x27;), contextualElement);
  return element;
}

/**
  &#x60;Ember.RenderBuffer&#x60; gathers information regarding the view and generates the
  final representation. &#x60;Ember.RenderBuffer&#x60; will generate HTML which can be pushed
  to the DOM.

   &#x60;&#x60;&#x60;javascript
   var buffer = new Ember.RenderBuffer(&#x27;div&#x27;, contextualElement);
  &#x60;&#x60;&#x60;

  @class RenderBuffer
  @namespace Ember
  @deprecated
  @private
*/

export default function RenderBuffer(domHelper) {
  Ember.deprecate(&#x27;&#x60;Ember.RenderBuffer&#x60; is deprecated.&#x27;);
  this.buffer = null;
  this.childViews = [];
  this.attrNodes = [];

  Ember.assert(&quot;RenderBuffer requires a DOM helper to be passed to its constructor.&quot;, !!domHelper);

  this.dom = domHelper;

  this.tagName = undefined;
  this.buffer = null;
  this._element = null;
  this._outerContextualElement = undefined;
  this.elementClasses = null;
  this.elementId = null;
  this.elementAttributes = null;
  this.elementProperties = null;
  this.elementTag = null;
  this.elementStyle = null;
}

RenderBuffer.prototype = {

  reset(tagName, contextualElement) {
    this.tagName = tagName;
    this.buffer = null;
    this._element = null;
    this._outerContextualElement = contextualElement;
    this.elementClasses = null;
    this.elementId = null;
    this.elementAttributes = null;
    this.elementProperties = null;
    this.elementTag = null;
    this.elementStyle = null;
    this.childViews.length = 0;
    this.attrNodes.length = 0;
  },

  // The root view&#x27;s element
  _element: null,

  // The root view&#x27;s contextualElement
  _outerContextualElement: null,

  /**
    An internal set used to de-dupe class names when &#x60;addClass()&#x60; is
    used. After each call to &#x60;addClass()&#x60;, the &#x60;classes&#x60; property
    will be updated.

    @private
    @property elementClasses
    @type Array
    @default null
  */
  elementClasses: null,

  /**
    Array of class names which will be applied in the class attribute.

    You can use &#x60;setClasses()&#x60; to set this property directly. If you
    use &#x60;addClass()&#x60;, it will be maintained for you.

    @property classes
    @type Array
    @default null
    @private
  */
  classes: null,

  /**
    The id in of the element, to be applied in the id attribute.

    You should not set this property yourself, rather, you should use
    the &#x60;id()&#x60; method of &#x60;Ember.RenderBuffer&#x60;.

    @property elementId
    @type String
    @default null
    @private
  */
  elementId: null,

  /**
    A hash keyed on the name of the attribute and whose value will be
    applied to that attribute. For example, if you wanted to apply a
    &#x60;data-view=&quot;Foo.bar&quot;&#x60; property to an element, you would set the
    elementAttributes hash to &#x60;{&#x27;data-view&#x27;:&#x27;Foo.bar&#x27;}&#x60;.

    You should not maintain this hash yourself, rather, you should use
    the &#x60;attr()&#x60; method of &#x60;Ember.RenderBuffer&#x60;.

    @property elementAttributes
    @type Hash
    @default {}
    @private
  */
  elementAttributes: null,

  /**
    A hash keyed on the name of the properties and whose value will be
    applied to that property. For example, if you wanted to apply a
    &#x60;checked=true&#x60; property to an element, you would set the
    elementProperties hash to &#x60;{&#x27;checked&#x27;:true}&#x60;.

    You should not maintain this hash yourself, rather, you should use
    the &#x60;prop()&#x60; method of &#x60;Ember.RenderBuffer&#x60;.

    @property elementProperties
    @type Hash
    @default {}
    @private
  */
  elementProperties: null,

  /**
    The tagname of the element an instance of &#x60;Ember.RenderBuffer&#x60; represents.

    Usually, this gets set as the first parameter to &#x60;Ember.RenderBuffer&#x60;. For
    example, if you wanted to create a &#x60;p&#x60; tag, then you would call

    &#x60;&#x60;&#x60;javascript
    Ember.RenderBuffer(&#x27;p&#x27;, contextualElement)
    &#x60;&#x60;&#x60;

    @property elementTag
    @type String
    @default null
    @private
  */
  elementTag: null,

  /**
    A hash keyed on the name of the style attribute and whose value will
    be applied to that attribute. For example, if you wanted to apply a
    &#x60;background-color:black;&#x60; style to an element, you would set the
    elementStyle hash to &#x60;{&#x27;background-color&#x27;:&#x27;black&#x27;}&#x60;.

    You should not maintain this hash yourself, rather, you should use
    the &#x60;style()&#x60; method of &#x60;Ember.RenderBuffer&#x60;.

    @property elementStyle
    @type Hash
    @default {}
    @private
  */
  elementStyle: null,

  pushChildView(view) {
    var index = this.childViews.length;
    this.childViews[index] = view;
    this.push(&quot;&lt;script id=&#x27;morph-&quot;+index+&quot;&#x27; type=&#x27;text/x-placeholder&#x27;&gt;\x3C/script&gt;&quot;);
  },

  pushAttrNode(node) {
    var index = this.attrNodes.length;
    this.attrNodes[index] = node;
  },

  hydrateMorphs(contextualElement) {
    var childViews = this.childViews;
    var el = this._element;
    for (var i=0,l=childViews.length; i&lt;l; i++) {
      var childView = childViews[i];
      var ref = el.querySelector(&#x27;#morph-&#x27;+i);

      Ember.assert(&#x27;An error occurred while setting up template bindings. Please check &#x27; +
                   (((childView &amp;&amp; childView.parentView &amp;&amp; childView._parentView._debugTemplateName ? &#x27;&quot;&#x27; + childView._parentView._debugTemplateName + &#x27;&quot; template &#x27; : &#x27;&#x27;))
                   )  + &#x27;for invalid markup or bindings within HTML comments.&#x27;,
                   ref);

      var parent = ref.parentNode;

      childView._morph = this.dom.insertMorphBefore(
        parent,
        ref,
        parent.nodeType === 1 ? parent : contextualElement
      );
      parent.removeChild(ref);
    }
  },

  /**
    Adds a string of HTML to the &#x60;RenderBuffer&#x60;.

    @method push
    @param {String} string HTML to push into the buffer
    @chainable
    @private
  */
  push(content) {
    if (typeof content === &#x27;string&#x27;) {
      if (this.buffer === null) {
        this.buffer = &#x27;&#x27;;
      }
      Ember.assert(&quot;A string cannot be pushed into the buffer after a fragment&quot;, !this.buffer.nodeType);
      this.buffer += content;
    } else {
      Ember.assert(&quot;A fragment cannot be pushed into a buffer that contains content&quot;, !this.buffer);
      this.buffer = content;
    }
    return this;
  },

  /**
    Adds a class to the buffer, which will be rendered to the class attribute.

    @method addClass
    @param {String} className Class name to add to the buffer
    @chainable
    @private
  */
  addClass(className) {
    // lazily create elementClasses
    this.elementClasses = (this.elementClasses || new ClassSet());
    this.elementClasses.add(className);
    this.classes = this.elementClasses.list;

    return this;
  },

  setClasses(classNames) {
    this.elementClasses = null;
    var len = classNames.length;
    var i;
    for (i = 0; i &lt; len; i++) {
      this.addClass(classNames[i]);
    }
  },

  /**
    Sets the elementID to be used for the element.

    @method id
    @param {String} id
    @chainable
    @private
  */
  id(id) {
    this.elementId = id;
    return this;
  },

  // duck type attribute functionality like jQuery so a render buffer
  // can be used like a jQuery object in attribute binding scenarios.

  /**
    Adds an attribute which will be rendered to the element.

    @method attr
    @param {String} name The name of the attribute
    @param {String} value The value to add to the attribute
    @chainable
    @return {Ember.RenderBuffer|String} this or the current attribute value
    @private
  */
  attr(name, value) {
    var attributes = this.elementAttributes = (this.elementAttributes || {});

    if (arguments.length === 1) {
      return attributes[name];
    } else {
      attributes[name] = value;
    }

    return this;
  },

  /**
    Remove an attribute from the list of attributes to render.

    @method removeAttr
    @param {String} name The name of the attribute
    @chainable
    @private
  */
  removeAttr(name) {
    var attributes = this.elementAttributes;
    if (attributes) { delete attributes[name]; }

    return this;
  },

  /**
    Adds a property which will be rendered to the element.

    @method prop
    @param {String} name The name of the property
    @param {String} value The value to add to the property
    @chainable
    @return {Ember.RenderBuffer|String} this or the current property value
    @private
  */
  prop(name, value) {
    var properties = this.elementProperties = (this.elementProperties || {});

    if (arguments.length === 1) {
      return properties[name];
    } else {
      properties[name] = value;
    }

    return this;
  },

  /**
    Remove an property from the list of properties to render.

    @method removeProp
    @param {String} name The name of the property
    @chainable
    @private
  */
  removeProp(name) {
    var properties = this.elementProperties;
    if (properties) { delete properties[name]; }

    return this;
  },

  /**
    Adds a style to the style attribute which will be rendered to the element.

    @method style
    @param {String} name Name of the style
    @param {String} value
    @chainable
    @private
  */
  style(name, value) {
    this.elementStyle = (this.elementStyle || {});

    this.elementStyle[name] = value;
    return this;
  },

  generateElement() {
    var tagName = this.tagName;
    var id = this.elementId;
    var classes = this.classes;
    var attrs = this.elementAttributes;
    var props = this.elementProperties;
    var style = this.elementStyle;
    var styleBuffer = &#x27;&#x27;;
    var attr, prop, tagString;

    if (!canSetNameOnInputs &amp;&amp; attrs &amp;&amp; attrs.name) {
      // IE allows passing a tag to createElement. See note on &#x60;canSetNameOnInputs&#x60; above as well.
      tagString = &#x60;&lt;${stripTagName(tagName)} name=&quot;${escapeAttribute(attrs.name)}&quot;&gt;&#x60;;
    } else {
      tagString = tagName;
    }

    var element = this.dom.createElement(tagString, this.outerContextualElement());

    if (id) {
      this.dom.setAttribute(element, &#x27;id&#x27;, id);
      this.elementId = null;
    }
    if (classes) {
      this.dom.setAttribute(element, &#x27;class&#x27;, classes.join(&#x27; &#x27;));
      this.classes = null;
      this.elementClasses = null;
    }

    if (style) {
      for (prop in style) {
        styleBuffer += (prop + &#x27;:&#x27; + style[prop] + &#x27;;&#x27;);
      }

      this.dom.setAttribute(element, &#x27;style&#x27;, styleBuffer);

      this.elementStyle = null;
    }

    if (attrs) {
      for (attr in attrs) {
        this.dom.setAttribute(element, attr, attrs[attr]);
      }

      this.elementAttributes = null;
    }

    if (props) {
      for (prop in props) {
        var { normalized } = normalizeProperty(element, prop);

        this.dom.setPropertyStrict(element, normalized, props[prop]);
      }

      this.elementProperties = null;
    }

    return this._element = element;
  },

  /**
    @method element
    @return {DOMElement} The element corresponding to the generated HTML
      of this buffer
    @private
  */
  element() {

    if (this._element &amp;&amp; this.attrNodes.length &gt; 0) {
      var i, l, attrMorph, attrNode;
      for (i=0, l=this.attrNodes.length; i&lt;l; i++) {
        attrNode = this.attrNodes[i];
        attrMorph = this.dom.createAttrMorph(this._element, attrNode.attrName);
        attrNode._morph = attrMorph;
      }
    }

    var content = this.innerContent();
    // No content means a text node buffer, with the content
    // in _element. Ember._BoundView is an example.
    if (content === null) {
      return this._element;
    }

    var contextualElement = this.innerContextualElement(content);
    this.dom.detectNamespace(contextualElement);

    if (!this._element) {
      this._element = this.dom.createDocumentFragment();
    }

    if (content.nodeType) {
      this._element.appendChild(content);
    } else {
      var frag = this.dom.parseHTML(content, contextualElement);
      this._element.appendChild(frag);
    }

    // This should only happen with legacy string buffers
    if (this.childViews.length &gt; 0) {
      this.hydrateMorphs(contextualElement);
    }

    return this._element;
  },

  /**
    Generates the HTML content for this buffer.

    @method string
    @return {String} The generated HTML
    @private
  */
  string() {
    if (this._element) {
      // Firefox versions &lt; 11 do not have support for element.outerHTML.
      var thisElement = this.element();
      var outerHTML = thisElement.outerHTML;
      if (typeof outerHTML === &#x27;undefined&#x27;) {
        return jQuery(&#x27;&lt;div/&gt;&#x27;).append(thisElement).html();
      }
      return outerHTML;
    } else {
      return this.innerString();
    }
  },

  outerContextualElement() {
    if (this._outerContextualElement === undefined) {
      Ember.deprecate(&quot;The render buffer expects an outer contextualElement to exist.&quot; +
                      &quot; This ensures DOM that requires context is correctly generated (tr, SVG tags).&quot; +
                      &quot; Defaulting to document.body, but this will be removed in the future&quot;);
      this.outerContextualElement = document.body;
    }
    return this._outerContextualElement;
  },

  innerContextualElement(html) {
    var innerContextualElement;
    if (this._element &amp;&amp; this._element.nodeType === 1) {
      innerContextualElement = this._element;
    } else {
      innerContextualElement = this.outerContextualElement();
    }

    var omittedStartTag;
    if (html) {
      omittedStartTag = detectOmittedStartTag(this.dom, html, innerContextualElement);
    }
    return omittedStartTag || innerContextualElement;
  },

  innerString() {
    var content = this.innerContent();
    if (content &amp;&amp; !content.nodeType) {
      return content;
    }
  },

  innerContent() {
    return this.buffer;
  }
};

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
